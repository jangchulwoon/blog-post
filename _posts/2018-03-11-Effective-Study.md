---
layout: post
title:  Effective-Java -2 
tags: Study 
categories: Java
---   

이번 포스트에서는 메서드와 관련된 내용을 다룹니다.   

    인자의 유효성검사를해라
    필요하다면 방어적 복사본을 만들어라 
    메서드 시그니처는 신중하게 설계해라
    오버로딩할 떄는 주의하라
    varargs는 신중히 사용하라 

> 이 밑 부분은 다음주에 진행하도록 하겠습니다.
    
    null 대신 빈 배열이나 컬랙션을 반환하라
    모든 API 요소에 문서화 주석을 달아라  


네 끝입니다 ~~ 

:D  

#### 인자의 유효성 검사를 해라 

대부분의 메서드는 인자로 사용할 수 없는 값들을 제한합니다. 

> null 또는 유효한 값인지를 자주 확인하고 있습니다.

이같은 유효성 검사는 메서드 시작부분에서 선언해야하며, 반드시 문서로 남겨야한다고 합니다. 

유효성검사는 꼭 필요한 절차이지만, 몇가지 예외에 대해서는 진행하지 않아도 됩니다.

    1. 유효성 검사 시, Overhead가 크다.
    2. 연산과정에서 자연스럽게 진행된다.

> 다만, 2번의 경우 가독성의 문제라거나 실패원자성을 잃게되는 문제가 존재합니다.


#### 필요하다면 방어적 복사본을 만들어라

저희와는 조금 거리가 먼 규칙이라고 생각됩니다.
(api 개발자들을 위한 규칙이라고 생각됩니다.)

> api를 사용하는 client는 당신의 코드를 최선을 다해 망가뜨릴 것을 가정합니다.

즉, client가 이상한 짓을 해도, 정상적으로 돌아갈 수 있도록 코드를 작성해야 한다고 말합니다.

코드를 방어하는 기법은 여러가지가 있겠지만, 이번 rule에서는 `방어적 복사`를 초점으로 진행합니다.

#### final 사용 

기본 자료형에 대해서는 final 키워드를 붙이면 불변식을 적용할 수 있습니다.

    public int sum(final int a, final int b) {
        return a + b;
    }


하지만, 객체라면 final은 약간은 다른 느낌을 풍기게 됩니다.
 
    public static void populateDate(final Date date){
        date.setTime(10000);
        System.out.println(date);
    }

모두 알 수 있듯 위 코드는 컴파일에러 없이 돌아갑니다.
(불변식이 의미가 약간 퇴색(?)되네요)

이를 막기위해 방어적 복사본을 사용하라는게 이번 rule의 내용이며, 복사본을 사용하는 point는 생성자, 메서드 (setter,getter)입니다.

> 사실 서비스 로직에서는 방어적 복사가 필요할지..는 모르겠네요 

#### 메서드 시그너처는 신중하게 설계하라 

이번 rule은 자잘한 룰들을 모아놓았습니다.
때문에 그냥 한줄씩 읽고 서로 토론하는 형식으로 진행했으면 합니다 :D 

1. 메서드 이름은 신중하게 지어라

> 당연한 말입니다.

메서드 이름을 신중하게 짓는다는 것은 일반적으로 사용되는 명칭으로 작명하라는 의미입니다.
예를들어, 어떤 객체를 만드는 역할의 함수를 작성할 때, 사용 할 수 있는 단어는 꽤나 많습니다.

    make, build , populate, create, ...

이 중에 일반적으로 사용되는 단어를 사용하라고 합니다.

> 물론 단어마다 풍기는 느낌이 조금씩은 다르긴하네요  

2.편의메서드를 제공하는데 너무 열을 올리지마라.

메서드가 많아질 수록, test 및 유지보수가 어려워지므로 최대한 맡은 일에 충실하게 끔 메서드를 설계하라고 말합니다.

3.인자리스트를 길게만들지마라.

개발자도 사람이다보니, 인자리스트가 길어질 수록 기억을 못할 가능성이 높다고합니다.
때문에 4개이상의 인자를 사용하지 말라고합니다.
인자를 줄이기 위해, 메서드를 쪼개거나 빌더패턴, 또는 helperclass를 사용하라고 합니다.

4.인자의 자료형은 class보다 interface가 좋다

DIP와 연결되는 내용으로 당연한겁니다.

5.인자자료형으로 boolean보다 enum을 쓰는게 좋다.

가독성 때문이라는데, 사실 이 부분은 호불호가 갈릴 수 있을거 같네요.

> 개인적으로 class가 많아지는건 좋게 보진 않아서요 .. 


여기까지가 규칙 40 이였습니다 :D

