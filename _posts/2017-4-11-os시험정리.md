---
layout: post
title: os 1장 
tags: 
categories: 학교
---

중간고사 정리본

### 컴퓨터 시스템의 개요 

##### 하드웨어 구성요소 

1. 처리기
    
	처리기는 레지스터와 ALU 제어장치로 구성되어 있음.

2. 주기억장치    

	주기억장치는 휘발성 !    
	데이터와 프로그램을 저장하며 CPU가 모든 주소를 바로 지정함.	 
3. 저장장치     

	비휘발성  EX 디스크 

4. 통신장치    

	네트워크 모듈 이런거 
 
5. I/O 장치 


> 컴퓨터 하드웨어는 처리기, 주기억장치 , 저장장치, I/O모듈 장치 , 통신 장치로 구성되어 있다.    


#### 처리기 외부 입출력용 레지스터

MAR 과 MBR 이 존재 . 


MAR은 다음번에 쓰거나 읽을 주소를 저장하고 있음.

**MBR은 메모리로 부터 쓰거나 가져온 데이터를 포함.**

#### 프로세서의 발전     

마이크로 프로세서란 ?  

초기에는 단일 칩에 하나의 프로세서를 집적,  현재는 단일칩에 코어라 불리는 여러개의 프로세서를 포함하고 있다.    

GPU    

고급 그래픽 랜더링에 사용됨 .     

DSP    

오디오와 비디오같은 Stream형 신호처리 

SOC     

전체 시스템이 하나의 칩에 내장 


> 마이크로프로세서와 GPU , DSP , SOC 가 존재 .   


#### 명령어 실행 2단계   

1. 반입 

 처리기가 메모리로부터 명령어를 읽는다.  >     
	 pc가 다음에 읽을 명령어 주소를 저장.  

> pc에서 실행할 명령어를 가져온  후, pc를 증가시킨다. 
   
2. 수행    

반입된 명령어를 수행한다.   


명령어 레지스터 (IR)    

IR은 현재 수행중인 명령어 주소를 저장한다.   
반입된 명령어 주소는 IR에 저장되고 
PC는 다음번 실행 할 명령어의 주소를 갖고있는다.   

명령어의 4가지 범주 .

처리기 <-> 메모리 / I/O     
데이터 처리    
제어     



#### Interupt ?    
   
대부분의 I/O 디바이스는 처리기보다 속도가 느림.    
처리기는 디바이스의 작업완료까지 기다리는 경우가 발생함.    
즉 , 기다리는 동안 처리기가 일을 안함.    

이러한 문제를 해결하기위해, I/O 디바이스가 작업완료 후, 처리기에게 
Interupt를 걸수 있도록 설계. -> 그동안 처리기는 다른 일을 할 수 있다.    

처리기는 명령어 실행 단계 마지막에서 Interupt 발생 여부를 체크함    

> interupt가 존재할 경우 멈추고 처리, 없으면 다음 명령어 반입.    

Interupt가 발생시, ISR를 실행.   

문제는 CPU가 interupt가 있는지 확인해야만 함. Overhead 발생. 

> I/O 처리동안 처리기가 다른 일을 할 수 있도록 I/O는 작업 완료시 interupt를 날림.   
> 단, 처리기는 interupt가 있는지 매번 체크해야 하므로 overhead가 발생 함.


#### Interupt의 종류   
순차적 인터럽트 / 중첩 인터럽트가 있음.    

1. 순차적 인터럽트

	우선순위 및 시간 긴급도를 고려하지않음.    
	하나의 인터럽트 처리중에는 다른 인터럽트 불능화.   
     
2. 중첩 인터럽트

	Interupt 간 우선순위를 부여.    
	낮은 Interupt 수행중에 높은 interupt가 들어오면 높은 interupt 시작가능.	


> 순차적 인터럽트는 우선순위를 고려하지않고 들어온 순서대로 처리함.     
> 중첩 인터럽트는 우선순위를 고려하며, 높은 interupt가 들어오면 새롭게 실행 할 수 있음.   


#### 입출력 관련 통신기술    

1. 프로그램된 입출력     

	처리기는 I/O연산이 끝날때 까지 I/O 모듈의 상태를 주기적으로 체크한다.    

	I/O 모듈은(S/W) 행위를 수행하고 나서, I/O 상태 레지스터에 관련 비트를 설정하고 처리기는 계속해서 비트를 확인해야한다.	
    
	POLLING -> Overhead 발생   

2. Interupt 구동 입출력    

	I/O 모듈이 처리를 끝내면 처리기에게 Interupt를 보내는 방식.    
	Interupt를 받으면 처리기는 문맥을 저장하고 ISR을 실행.   
	
> 문맥이란 현재 수행중인 상태를 의미한다.    

	Interupt 구동 방식은 처리기가 인터럽트에 깊게 관여한다는 단점이 있다.   

3. DMA     

Direct Memory access  

처리기와 I/O 모듈사이에서 데이터 블록을 직접 전송 
이때 처리기가 간섭하지 않음    

#### 메모리 계층구조    

접근시간이 빠르면 비용이 증가    
용량이 클수록 비트당 저장 비용이 감소   
용량이 크면 접근속도는 느림  

> 계층 구조를 내려가면서    
> 비트당 비용감소 , 접근속도 감소 , 용량 증가 , 처리기 접근 빈도가 줄어듬     


#### 참조 지역성    

처리기의 메모리 참조는 인근 지역으로 몰리는 경향이 있다.    

지역성에는 시간 지역성과 공간 지역성이 있다.

시간 지역성은 한번 불린 데이터가 근 시일내로 또다시 불린다. (반복문)    

공간 지역성은 한번 불린 데이터 인근에 데이터가 또다시 불릴수 있다. (배열)     


> 이러한 참조 지역성을 특징을 이용해서 캐싱을 구성함.   


#### 캐싱    


(메모리 계층구조) 빠른 저장 장치에 최근 접근한 데이터를 저장하는 기법.    
( 데이터 일치성의 문제가 존재함. )   

###### 캐시 원칙    

참조 지역성 때문에 최근 불릴 데이터를 캐시에 존재할 가능성이 있음.
때문에 처리기는 캐시를 먼저 참조한다.   
캐시에 데이터가 없을 시, 해당 데이터 블록을 캐시에 저장해둠.     

> 캐시는 OS에 보이지 않고, CPU 및 MMU가 전담한다. 
> SRAM을 사용함.   


+ 디스크 캐시  메인메모리 일부를 이용하여  디스크에 저장된 데이터 일부를 일시적으로 저장하기 위해 사용.   


캐시 설계시 고려사항  

> 캐시의 크기, 블록의 크기 , 매핑함수 , 교체알고리즘, 쓰기 정책 , 캐시 단계수  
> 매핑함수란 블록이 캐시의 어느위치에 저장되는지 결정  


##### 병행성과 병렬성    

병행성은 CPU가 한개    

병렬성은 CPU가 여러개 ..   

병렬성에는 SMP , 클러스터 (네트웤) ....

#### SMP 란    
두개이상의 유사한 프로세서로 구성됨    
이 친구들은 하나의 통합된 OS에 의해 제어.     

주기억장치와 I/O 장치를 공유하며, 프로세서들이 메모리로 접근하는 시간이 거의 비슷하다. => 
모든 처리기는 동일한 수행을 할 수 있다.    

장점으로는 성능과 가용성, 점진적 확정 , 크기 조정 등이 있다 .     

성능 = > 2개 이상의 유사한 프로세서로 이루어지기에, 동일 타입의 단일 프로세서에 비해 성능이 좋음 .   

가용성 => 여러개의 프로세서로 구성되어, 하나의 프로세서에 문제가 생기더라도 동작이 가능함.   

점진적 확장 - > 프로세서를 추가적으로 늘릴 수 있다.   

크기 조정 - > 밴더들은 처리기 수에 따라 성능/가격 이 다양한 제품을 낼 수 있다. 




    


 