---
layout: post
title:  You don't know Js-3
tags: JS
categories: Book
---


이번장에서는 JS의 native에 대해 학습합니다.
여기서 사용되는 native의 의미는 플랫폼이나 client에 종속되지 않는 객체를 의미합니다.

> browser나 framework에 종속되지 않는, Js 기본 함수라고 생각하시면 됩니다.

## Feature of Native function

대표적인 Native는 아래와 같습니다.

	String, Number, Array, Function,
	Object, Symbol, Boolean, Date ...

> 얼핏 본것도 있고, 본적없는 것도 있네요

#### Wrapper Boxing

위에서 볼 수 있듯, 몇몇 Wrapper 객체들이 존재함을 알 수 있습니다.

	string -> String
	boolean -> Boolean
	...

js에서 재밌는 점은, primitive 자료형에 Wrapper 함수를 사용해도 된다는 점 입니다.

 	var string = "a b c";
	string  // "a b c"  출력. 별도의 함수가 없는걸 알 수 있습니다.
	string.split(" "); // ["a","b","c"]  

split은 wrapper 객체에 있는 함수 입니다.

> primitive 에는 없는 함수 입니다.

이렇게 동작하는 이유는 js engine에서 자동적으로 Boxing을 해주기때문입니다.

> 같은 이유로 str.length 도 primitive에서 동작합니다.

단, 함수들을 사용할때 boxing을 해줄뿐, instanceOf를 사용하면 false가 나옵니다.

	str instanceof String // false

#### Boolean Wrapper 의 함정

만약 boolean 을 Boxing하여 사용할 경우, 아래와 같은 대 참사가 일어날 수 있습니다.


	if(new Boolean(false)) { console.log("!?"); } // truly

위 코드를 그대로 찍어보면, console에 log가 남는걸 알 수 있습니다.

> js의 truly / falsy 특성으로 인해 `new Boolean(false)`가 true로 판단 됩니다.

#### ValueOf

위 같은 문제나, wrapper된 primitve의 값을 직접 사용하기 위해서는 `valueOf`함수를 사용하면 됩니다.

	if( new Boolean(false).valueOf() ) { console.log("!?"); }

다만 이렇게 사용하게되면 너무 코드가 길어지고, 인자가 wrapper인지 아닌지 확인하기 위한 비용도 수반됩니다.
때문에 꼭 필요한 상황이 아니라면, Wrapper object는 피하는게 좋습니다.

> 위에서 설명했듯, engine에서 함수까지 지원해주므로, wrapper를 사용할 일은 거의 없겠네요.

#### Array

책의 내용은 한 줄로 요약가능합니다.

	new Array를 쓸 필요없음.

`var array = [];`로 작성해도 engine이 Array wrapper로 생성해주기때문에 `new Array`는 거의 사용하지 않습니다.
`new Array`의 용도는 생성 초기 array 길이를 초기화 할때 사용할 수 있지만, 길이를 먼저 정해놓고 사용하는건 사용 시점에 혼란만 부축일 뿐 큰 의미가 없다고 합니다.

> 실제로도 new Array() 코드는 본적이 없네요

#### object

Object 코드 또한 Array 처럼 `var obj = {}` 로 생성하면 engine이 `new Object()` 형태로 변수를 생성합니다.
때문에 Literal을 사용하는게 가독성 측면에서도 좋습니다.

> new Object()를 사용하면 생성 후 obj.value = '' 처럼 초기화를 해야합니다.

#### function

동적으로 함수를 생성하고자 할때 사용하지만, 거의 사용하지 않습니다.

> TODO 사용법 + scope ?

#### RegExp, Date and Error

지금까지 나왔던 wrapper 들은 거의 사용하지 않는 애들이였습니다.
이번에 설명할 RegExp 와 Date / Error 는 꽤 자주 사용하는 Wapper 입니다.

Date는 시간과 관련된 작업을 하기위해 사용되며, Error는 에러 처리를 하기 위해 사용되는 Native 입니다.

> 요 부분은 크게 정리하진 않습니다.

RegExp는 정규식을 생성하는 객체로, 동적으로 정규식을 만들때 많이 사용합니다.
js에서는 `\regular expression\` 으로 정규식을 생성할 수 있는데요. 이것에 단점은 동적으로 문자열을 받아 표현식을 생성하기 어렵다는 점 입니다.
동적으로 정규식을 생성하기 위해ㅔ `new RegExp(str);` 처럼 사용할 수 있습니다.


#### 마치며

이번 포스트에서는 Native의 종류와 몇가지 특성들을 정리했습니다.
평소 어렵풋이 알고 있던 wrapper, Boxing을 정리하는데 좋은 시간이였던것 같습니다.

> 아직 많이 부족하지만 ..

계속 정리해보도록 하겠습니다.
읽어주셔서 감사합니다 ~! 

lusiue@gmail.com    
2018.08.19
